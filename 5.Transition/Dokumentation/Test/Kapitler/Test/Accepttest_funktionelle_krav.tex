\chapter{Funktionelle krav}
Dette afsnit specificerer accepttesten af den autonome overvågningsdrone.

\section*{Formål}
Dokumentet specificerer accepttests af systemet og vil i udfyldt stand udgøre accepttest tilhørende funktionelle krav. 

\section*{Godkendelseskriterier}
Godkendelsen af accepttesten består af to trin:

\begin{enumerate}
	\item Godkendelse af accepttestspecifikationen. \\
	Dette gøres på bagsiden af dokumentet i "Godkendt af" feltet.

	\item Godkendelse af selve accepttesten. Dette gøres i afsnit Testresultat. 
\end{enumerate}

Accepttesten er afsluttet, når alle testcases er testet.

Hvis der under accepttesten opstår fejl, der umuliggør fortsat udførsel af de efterfølgende testcases afbrydes denne test.

Hvis der opstår fejl i enkelte testcases; men fortsat accepttest er mulig, underkendes den enkelte test og accepttesten fortsættes med efterfølgende testcases.

Såfremt en test afbrydes eller en testcase underkendes, skal der udfærdiges en problemrapport, der beskriver årsagen til underkendelse. Problemrapporten godkendes af både internt og af kunde eller produkt manager.

\newpage

\section*{Testspecifikation}
Software der skal testes:
\begin{table}[H]
	\centering
		\begin{tabular}{|c|c|c|c|}
			\hline
			Software & Version & Release dato & Bemærkning \\ \hline
			Server & Rev. 226b85b & 23/11-2014 & \\ \hline			
			Webapplikation & Rev. 7969aac & 04/12-2014 &\\ \hline
		\end{tabular}
	\caption{Software}
\end{table}

Hardware der skal testes:
\begin{table}[H]
	\centering
		\begin{tabular}{|c|c|c|c|}
			\hline
			Hardware & Version & Release dato & Bemærkning \\ \hline
			Kompas 			& Rev. 9d3ec7b & 17/11-2014 &  \\ \hline			
			Højdemåler 		& Rev. 9d3ec7b & 17/11/2014 &  \\ \hline
			3G/GPS modul 	& Rev. 51ec5ac & 7/11-2014 &  \\ \hline
			Switch board 	& Rev. 9d3ec7b & 17/11/2014 &  \\ \hline
		\end{tabular}
	\caption{Hardware}
\end{table}


\section*{Testprocedure}
De individuelle use cases og scenarier i kravspecifikationen testes i enkelte test cases med testdata som angivet for test casen. 

\begin{itemize}
	\item Hvis et teststep gennemføres fejlfrit markeres dette med ”Godkendt” i feltet ”resultat” for testen. for det pågældende test step.

	\item Hvis et teststep gennemføres med ubetydelige fejl, markeres dette med ”(OK)” i feltet ”resultat” for det pågældende test step, samt evt. en henvisning til en fejlrapport hvori fejlen beskrives.
	
	\item Hvis et teststep gennemføres med betydelige fejl, markeres dette med en henvisning (”1”, ”2”, ”3”,…) til en fejlrapport, som udarbejdes med en beskrivelse af fejlen.
	
\end{itemize}
Det overordnede testresultat angives på sidste side i dette dokument. Ved kundens og projektgruppens underskrift på samme side godkendes det af begge parter, at testresultatet er som angivet.

\newpage

\section{Test case 1: Start drone}
Use case under test: UC 1: Start drone.\\
Forudsætninger:	Ingen.

\textbf{Hovedscenarie}
\begin{table}[H]
	\centering
		\begin{tabular}{|l|p{5 cm}|p{5 cm}|p{3.5 cm}|} 
		\hline
			Step & Handling & Forventet resultat & Resultat\\ \hline
			1 & Bruger tilslutter batteri og dronen tændes. & Systemet tilføres forsyning og ESC'er signalerer de er \newline forbundet til forsyning. &   \\ \hline
			2 & Main controller initialiseres. & Main controller startes. &   \\ \hline
			3 & GPS initialiseres og dronens nuværende GPS position \newline opdateres. & Nuværende GPS position \newline opdateres og gemmes lokalt på main controller. &   \\ \hline
			4 & 3G initialiseres og dronen opretter forbindelse til \newline 3G-netværket. & Dronen tilsluttes det mobile \newline 3G-netværk. &  \\ \hline
			5 & Dronens nuværende GPS \newline position sendes til server. & På webapplikation vises \newline drones nuværende position og at dronen er online. &  \\ \hline
		\end{tabular}
\end{table}

\textbf{Extension 1: Forbindelse kan ikke oprettes.}
\begin{table}[H]
	\centering
		\begin{tabular}{|l|p{5 cm}|p{5 cm}|p{3.5 cm}|} 
		\hline
			Step & Handling & Forventet resultat & Resultat\\ \hline
			a & Systemet indikerer fejl og bruger genstarter systemet. & Systemet genstartes og \newline forbindelse oprettes. & \\ \hline
		\end{tabular}
\end{table}

\newpage
\section{Test case 2: Ny flyveopsætning}
Use case under test: UC 2: Ny flyveopsætning.\\
Forudsætninger:	Bruger er oprettet i systemet og UC\#1 er succesfuld gennemført.

\textbf{Hovedscenarie}
\begin{table}[H]
	\centering
		\begin{tabular}{|l|p{5 cm}|p{5 cm}|p{3.5 cm}|} 
		\hline
			Step & Handling & Forventet resultat & Resultat\\ \hline
			1 & Bruger logger på \newline webapplikation. & Login lykkes, og webapplikationens forside vises. &  \\ \hline
			2 & Fra forsiden navigerer bruger til flyveopsætning. & Flyveopsætnings siden vises. & \\ \hline
			3 & Bruger laver en ny \newline flyveopsætning og vælger: \newline
				- GPS lokationer der \newline skal flyves til. \newline
				- Om der skal tages billeder ved de valgte lokationer. \newline
				- Højde billeder skal tages fra. \newline
				- Generel flyvehøjde.				
				 & Flyveopsætning klargjort & \\ \hline
			4 & Bruger gemmer flyveopsætning og gør den tilgængelig på server. & Flyveopsætning gøres \newline tilgængelig på server & \\ \hline
		\end{tabular}
\end{table}

\textbf{Extension 1: Fejl i login.}
\begin{table}[H]
	\centering
		\begin{tabular}{|l|p{5 cm}|p{5 cm}|p{3.5 cm}|} 
		\hline
			Step & Handling & Forventet resultat & Resultat\\ \hline
			a & Bruger føres tilbage til login. & Login kan påny forsøges. & \\ \hline
		\end{tabular}
\end{table}

\textbf{Extension 2: Der laves ikke ny flyveopsætning.}
\begin{table}[H]
	\centering
		\begin{tabular}{|l|p{5 cm}|p{5 cm}|p{3.5 cm}|} 
		\hline
			Step & Handling & Forventet resultat & Resultat\\ \hline
			a & Gemt flyveopsætning bruges. & Flyveopsætning klargjort. & \\ \hline
		\end{tabular}
\end{table}

\newpage

\section{Test case 3: Flyv til position}
Use case under test: UC 3: Flyv til position.\\
Forudsætninger:	UC\#1 og UC\#2 er succesfuld gennemført.

\textbf{Hovedscenarie}
\begin{table}[H]
	\centering
		\begin{tabular}{|l|p{5 cm}|p{5 cm}|p{3.5 cm}|} 
		\hline
			Step & Handling & Forventet resultat & Resultat\\ \hline
			1 & Drone henter flyveopsætning fra server. & Der oprettes forbindelse \newline mellem server og drone \newline og flyveopsætning sendes. & \\ \hline
			2 & Nuværende position \newline opdateres. & Ingen handling  &  \\ \hline
			3 & Flyvehøjde tilpasses. & Flyvehøjde justeres &  \\ \hline
			4 & Flyveorientering tilpasses. & Orientering justeres &  \\ \hline
			5 & Drone flyver mod \newline ønsket position. & Drone nærmer sig \newline ønsket position  &  \\ \hline
			6 & Ønsket position er nået. & Ønsket position er nået. \\ \hline
		\end{tabular}
\end{table}

\textbf{Extension 1: Dronen henter ikke flyveopsætning.}
\begin{table}[H]
	\centering
		\begin{tabular}{|l|p{5 cm}|p{5 cm}|p{3.5 cm}|} 
		\hline
			Step & Handling & Forventet resultat & Resultat\\ \hline
			a & Flyvning med en anden flyveopsætning er aktiv. & UC \#3 fortsættes med den aktive flyveopsætning. & \\ \hline
		\end{tabular}
\end{table}

\textbf{Extension 2: Ugyldig GPS koordinat.}
\begin{table}[H]
	\centering
		\begin{tabular}{|l|p{5 cm}|p{5 cm}|p{3.5 cm}|} 
		\hline
			Step & Handling & Forventet resultat & Resultat\\ \hline
			a & Drone går i fejlmode \#1. & Forsøger at finde gyldig GPS koordinat, mislykkes dette lander dronen. & \\ \hline
		\end{tabular}
\end{table}

\textbf{Extension 3: Ugyldig flyvehøjde.}
\begin{table}[H]
	\centering
		\begin{tabular}{|l|p{5 cm}|p{5 cm}|p{3.5 cm}|} 
		\hline
			Step & Handling & Forventet resultat & Resultat\\ \hline
			a & Drone går i fejlmode \#2. & Forsøger at finde gyldig \newline flyvehøjde, mislykkes dette lander dronen. & \\ \hline
		\end{tabular}
\end{table}

\textbf{Extension 4: Ønsket position er ikke nået.}
\begin{table}[H]
	\centering
		\begin{tabular}{|l|p{5 cm}|p{5 cm}|p{3.5 cm}|} 
		\hline
			Step & Handling & Forventet resultat & Resultat\\ \hline
			a & UC \#3 genstartes. & Dronen flyver til position. & \\ \hline
		\end{tabular}
\end{table}

\newpage

\section{Test case 4: Billede af position}
Use case under test: UC 4: Billede af position.\\
Forudsætninger:	UC\#3 er succesfuld gennemført.

\textbf{Hovedscenarie}
\begin{table}[H]
	\centering
		\begin{tabular}{|l|p{5 cm}|p{5 cm}|p{3.5 cm}|} 
		\hline
			Step & Handling & Forventet resultat & Resultat\\ \hline
			1 & Drone tager et billede af \newline nuværende position. & Kamera aktiveres og der \newline tages et billede. & \\ \hline
			2 & Billedet sendes til server. & Billedet sendes til server gøres tilgængelig på \newline webapplikationen &  \\ \hline
			3 & Bruger giver accept af billedet via webapplikation. & Billedet gemmes i database  & \\ \hline

		\end{tabular}
\end{table}


\textbf{Extension 1: Bruger beder om nyt billede.}
\begin{table}[H]
	\centering
		\begin{tabular}{|l|p{5 cm}|p{5 cm}|p{3.5 cm}|} 
		\hline
			Step & Handling & Forventet resultat & Resultat\\ \hline
			a & Drone instrueres til at \newline ændre flyvehøjde, orientering eller position. & Flyvehøjde, orientering eller position ændres. & \\ \hline
		\end{tabular}
\end{table}

\textbf{Extension 2: Bruger svarer ikke inden for tidsgrænsen.}
\begin{table}[H]
	\centering
		\begin{tabular}{|l|p{5 cm}|p{5 cm}|p{3.5 cm}|} 
		\hline
			Step & Handling & Forventet resultat & Resultat\\ \hline
			a & Drone får automatisk tildelt accept. & Drone påbegynder flyvning mod næste GPS lokation. & \\ \hline
		\end{tabular}
\end{table}

\newpage
\section{Test case 5: Vis tidligere flyvning}
Use case under test: UC 5: Vis tidligere flyvning.\\
Forudsætninger:	Bruger er oprettet i systemet.

\textbf{Hovedscenarie}
\begin{table}[H]
	\centering
		\begin{tabular}{|l|p{5 cm}|p{5 cm}|p{3.5 cm}|} 
		\hline
			Step & Handling & Forventet resultat & Resultat\\ \hline
			1 & Bruger logger på \newline webapplikation. & Login lykkes og webapplikations forside vises. &  \\ \hline
			2 & Fra forsiden navigerer \newline bruger til historik. & En oversigt over tidligere \newline flyvninger vises. & \\ \hline
			3 & Bruger vælger en specifik \newline tidligere flyvning. &  Billeder, video og flyverute \newline tilhørende valgte flyvning \newline vises. & \\ \hline			
		\end{tabular}
\end{table}

\textbf{Extension 1: Fejl i login.}
\begin{table}[H]
	\centering
		\begin{tabular}{|l|p{5 cm}|p{5 cm}|p{3.5 cm}|} 
		\hline
			Step & Handling & Forventet resultat & Resultat\\ \hline
			a & Bruger føres tilbage til login. & Login kan påny forsøges. & \\ \hline
		\end{tabular}
\end{table}

\section{Test case 6: Anti kollision}
Use case under test: UC 6: Anti kollision.\\
Forudsætninger:	UC\#3 er igangværende.

\textbf{Hovedscenarie}
\begin{table}[H]
	\centering
		\begin{tabular}{|l|p{5 cm}|p{5 cm}|p{3.5 cm}|} 
		\hline
			Step & Handling & Forventet resultat & Resultat\\ \hline
			1 & Anti kollisions system \newline detekterer en forhindring. & Bremser dronens fremdrift. &  \\ \hline
			3 & Undvigelsesmanøvre udføres. & Drone passere forhindring og flyver videre. & \\ \hline			
		\end{tabular}
\end{table}

\textbf{Extension 1: Forhindringen kan ikke undviges.}
\begin{table}[H]
	\centering
		\begin{tabular}{|l|p{5 cm}|p{5 cm}|p{3.5 cm}|} 
		\hline
			Step & Handling & Forventet resultat & Resultat\\ \hline
			a & Drone går i fejlmode \#3. & Forsøger at finde måde at passere forhindring. Mislykkes det lander dronen. & \\ \hline
		\end{tabular}
\end{table}


