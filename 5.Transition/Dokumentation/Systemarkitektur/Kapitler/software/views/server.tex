\subsection{Opsætning af server}
Dette afsnit har til formål at beskrive hvordan et udviklingsmiljø sættes op på en givet maskine, så vider udvikling af systemet kan finde sted. Afsnittet forklarer også hvilke tredjeparts teknologier der er anvendt og eventuelle afhængigheder.

\subsubsection*{OS}
Det anbefales at udviklingen finder sted på en OS X eller Linux maskine, da UNIX-terminalen er et meget brugt værktøj og som standart er windows cmd meget "begrænset". Det kan dog lade sig gøre at bruge windows's cmd med nogle tweaks. Dette er ikke noget der vil blive forklaret yderligere og derfor er det kun UNIX-terminalen der er beskrevet i afsnittet.

\subsubsection*{IDE/Text Editor}
Da alt server opsætningen og logikken er skrevet i python, som er et højniveau script sprog, er der ikke nogle specielle krav til et IDE. Et simpelt tekst redigerings program er at fortrække. Det anbefales enten at bruge Sublime\footnote{http://www.sublimetext.com/2} Text Editoren eller Atom\footnote{https://atom.io/} Editoren. Begge text editors tilbyder god code highlightning og mulighed for at tilføje tredje parts pakker. Et udkast af de pakker der bruges er "PyLinter", "pep8" eller "Linter", som tjekker koden for evt. fejl i indentering, manglende kommentar eller kode standart.

\subsubsection*{Installation af software}
Dette underafsnit vil forklare hvordan diverse software pakker installeres på udviklingernes maskine og hvordan udviklerne starter den lokale server op. \\
Det første program der skal installeres er git. Skriv følgende i terminalen.

Linux:
\begin{lstlisting}[language=bash]
	$ sudo apt-get install Git
\end{lstlisting}

\textit{OS X: Kommer som standart med git installeret.}

Efter git er installeret på maskinen skal source koden klones fra github. Skriv følgende i terminalen.

\begin{lstlisting}[language=bash]
	$ git clone https://github.com/Opstrup/drone_backend
\end{lstlisting}

Efter source koden er hentet skal package manager programmet pip\footnote{https://pypi.python.org/pypi/pip} installeres. Skriv følgende i terminalen.

Linux:
\begin{lstlisting}[language=bash]
	$ sudo apt-get install python-pip
\end{lstlisting}

OS X:
\begin{lstlisting}[language=bash]
	$ sudo easy_install pip
\end{lstlisting}

Når pip er installeret skal scriptet "requirements.txt" køres, dette script ligger i roden af server projektet som blev hentet fra github. Skriv følgende i terminalen (da pip bliver brugt som package manager er kommandoen ens på Linux og OS X). \\

\begin{lstlisting}[language=bash]
	$ pip install -r requirements.txt
\end{lstlisting}

Efter scriptet er kørt og pip har installeret alle afhængigheder, er serveren klar til blive startet. For at starte serveren, skriv følgende i terminalen.

\begin{lstlisting}[language=bash]
	$ cd drone_backend_api/
	$ ./manage.py runserver
\end{lstlisting}


På figur \ref{fig:server_startup} ses et udklip af terminal vinduet ved server startup. Det ses at serveren er startet på "http://127.0.0.1:8000/", bemærk at denne url ikke bruges og vil derfor vise en: 404 error page not found fejl, hvis den tilgås. For at tilgå servere kan api endpoints, som beskrevet i Data view afsnittet, benyttes, http://127.0.0.1:8000/api/drones/.
\begin{figure}[H]
	\centering
	\includegraphics[width=0.85\textwidth]{Billeder/implementation/server_startup.png}
	\caption{Server startup msg}
	\label{fig:server_startup}
\end{figure}
\newpage

\subsubsection*{Mappestruktur}
Dette underafsnit vil forklare om den overordnede mappe struktur i projektet og giver en overordnet forståelse af django udvikling. \\

På figur \ref{fig:mappestruktur_1} ses den overordnet mappe struktur. I roden af mappen findes to væsentlige filer: db.sqlite3 hvilket er database filen til serveren, denne fil vil aldrig blive brugt direkte, men kun indirekte igennem django-frameworket. Den anden fil er manage.py, denne fil er main filen i hele projektet. Filen redigeres aldrig, men bruges kun via terminalen, til forskellige kommandoer på django-applikationen. \\

I roden findes der også to mapper "backend\_api" og "drone\_backend\_api". "drone\_backend\_api"  mappen er selve projekt mappen og "backend\_api" er applikations mappen.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.2\textwidth]{Billeder/implementation/mappestruktur_1.png}
	\caption{Mappestruktur rod}
	\label{fig:mappestruktur_1}
\end{figure}

På figur \ref{fig:mappestruktur_2} ses projekt mappen, de væsentlige filer i denne mappe er settings.py og urls.py. Settings.py er filen hvor alle tredje parts applikationer registeres i tuplen "INSTALLED\_APPS", her filen vil sikkerheds indstillinger også sættes op i tuplen "MIDDLEWARE\_CLASSES". Urls.py filen bliver brugt til at registre hvilke urls server kender og hvilket funktioner/views der skal præsenteres. Yderligere dokumentation omkring settings.py og urls.py kan findes under djangos egen dokumentation omkring settings\footnote{https://docs.djangoproject.com/en/dev/ref/settings/} og urls\footnote{https://docs.djangoproject.com/en/dev/ref/urls/}.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.2\textwidth]{Billeder/implementation/mappestruktur_2.png}
	\caption{Mappestruktur projekt mappe}
	\label{fig:mappestruktur_2}
\end{figure}

\newpage

På figur \ref{fig:mappestruktur_3} ses applikations mappen. Denne mappe indeholder alt logikken til serveren.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.2\textwidth]{Billeder/implementation/mappestruktur_3.png}
	\caption{Mappestruktur applikations mappe}
	\label{fig:mappestruktur_3}
\end{figure}

\textbf{admin.py} \\
Denne fil indeholder registrering af div tables i projektet, så de kan tilgås via en admin page hvor en administrator kan redigere i dataen der findes i databasen. Yderligere dokumentation omkring admin.py kan findes på\footnote{https://docs.djangoproject.com/en/dev/ref/contrib/admin/}.

\textbf{models.py} \\
Denne fil indeholder alt logikken til hvilke tabeller og attributter der eksistere i databasen. Via denne fil bliver db.sqlite3 filen som findes i roden, manipuleret. Yderligere dokumentation omkring models.py kan findes på\footnote{https://docs.djangoproject.com/en/dev/topics/db/models/}.

\textbf{serializers.py} \\
Denne fil indeholder serializers, disse bliver kaldt når et api-endpoint bliver kaldt og via disse serializers finder serveren ud af hvilke data der skal hentes fra databasen og repræsenteres. Disse serializers bliver hovedsageligt brugt til at formatere dataen fra databasen til et JSON format. Yderligere dokumentation omkring serializers.py kan findes på\footnote{https://docs.djangoproject.com/en/dev/topics/serialization/}.

\textbf{views.py} \\
Denne fil håndtere de requests som der bliver kaldt og ud fra dem afgøre den hvilke serializer der skal generes og præsenteres. Yderligere dokumentation omkring views.py kan findes på\footnote{https://docs.djangoproject.com/en/dev/topics/class-based-views/}.
\newpage

\subsubsection*{Debug}
Dette underafsnit vil beskrive hvordan server software kan debugges og hvordan de forskellige værktøjer kan bruges.\\

\textbf{Terminal}\\
På figur \ref{fig:get_eksempel} ses et udklip af terminal vinduet, hvor et to GET requests har fundet sted på serveren. Som det ses på billedet er det muligt debugge serveren og tjekke hvilke data der bliver sendt frem og tilbage ved hvert request til serveren. 

\begin{figure}[H]
	\centering
	\includegraphics[width=0.7\textwidth]{Billeder/implementation/get_eksempel.png}
	\caption{GET eksempel}
	\label{fig:get_eksempel}
\end{figure}

\textbf{Browser}\\
På figur \ref{fig:browser_eksempel} ses et eksempel på hvordan browseren også kan bruges til at debugge serveren. Her ses det hvilke data der kan hentes ved at gå til api-endpoint\\
"http://127.0.0.1:8000/api/drones/". Yderligere information kan findes under Data View afsnittet.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.7\textwidth]{Billeder/implementation/browser_eksempel.png}
	\caption{Browser eksempel}
	\label{fig:browser_eksempel}
\end{figure}

\newpage

\subsubsection*{Tredje part teknologier}
Til udviklingen af server softwaren er der benyttet nogle treide parts teknologier, dette underafsnit beskriver hvilke og hvordan de er blevet brugt.

\textbf{Djangorestframework}\\
Django frameworket i sig selv er rigtig god til at udvikle webapplikationer, men da der til dette projekt ønskede et RESTful api, er der lagt django-rest-frameworket\footnote{http://www.django-rest-framework.org/} oven på django frameworket. Hvilke gør udviklingen af RESTful api'er med django frameworket en del mere simpel.  

\textbf{django-cors-headers}\\
Cors headers\footnote{https://github.com/ottoyiu/django-cors-headers} er en django applikation som tilføjer CORS (Cross-Origin Resource Sharing) til applikationen. Dette gør det muligt at tilgå applikationen fra andre server, som fx vores client software som kunne ligge på en anden server eller vores drone som tilgår serveren. 